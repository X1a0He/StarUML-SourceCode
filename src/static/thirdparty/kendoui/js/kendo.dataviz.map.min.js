/*
* Kendo UI v2014.1.528 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.userevents.min","./kendo.tooltip.min","./kendo.dataviz.core.min","./kendo.mobile.scroller.min","./kendo.core.min","./kendo.draganddrop.min"],e)}(function(){return function(){function e(e){return typeof e!==k}function t(e,t){var n=f.pow(10,t||0);return f.round(e*n)/n}function n(e,t,n){return f.max(f.min(e,n),t)}function i(e){return e*_}function r(e){return e/_}function o(e){return f.round(e)+.5}function a(e){return"number"==typeof e&&!isNaN(e)}function s(t,n){return e(t)?t:n}function l(e){return e*e}function d(t,n){return e(n)?" "+t+"='"+n+"' ":""}function c(e){var t,n="";for(t=0;e.length>t;t++)n+=d(e[t][0],e[t][1]);return n}function u(e){return"string"!=typeof e&&(e+="px"),e}function p(e){var t,n,i=[];if(e)for(t=g.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function h(){this.observer&&this.observer.geometryChange()}var f=Math,g=window.kendo,m=g.deepExtend,v=g.dataviz,_=f.PI/180,k="undefined";m(v,{util:{mixins:{geometryChange:h},alignToPixel:o,defined:e,deg:r,isNumber:a,limitValue:n,round:t,rad:i,renderAttr:d,renderAllAttr:c,renderPos:p,renderSize:u,sqr:l,valueOrDefault:s}})}(window.kendo.jQuery),function(){var e,t,n,i=Math,r=window.kendo,o=r.Class,a=r.deepExtend,s=r.dataviz,l=s.util,d=l.defined,c=l.rad,u=l.round,p=o.extend({init:function(e,t){this.x=e||0,this.y=t||0,this.observer=null},geometryChange:l.mixins.geometryChange,set:function(e,t){return"x"===e?this.x!==t&&(this.x=t,this.geometryChange()):"y"===e&&this.y!==t&&(this.y=t,this.geometryChange()),this},get:function(e){return"x"===e?this.x:"y"===e?this.y:void 0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new p(this.x,this.y)},rotate:function(e,t){var n=c(t),r=i.cos(n),o=i.sin(n),a=e.x,s=e.y,l=this.x,d=this.y;return this.x=a+(l-a)*r+(d-s)*o,this.y=s+(d-s)*r-(l-a)*o,this.geometryChange(),this},multiply:function(e){return this.x*=e,this.y*=e,this.geometryChange(),this},transform:function(e){return this.x=e.a*this.x+e.c*this.y+e.e,this.y=e.b*this.x+e.d*this.y+e.f,this.geometryChange(),this},add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return i.sqrt(t*t+n*n)},round:function(e){return this.x=u(this.x,e),this.y=u(this.y,e),this}});p.fn.toString=function(e,t){var n=this.x,i=this.y;return d(e)&&(n=u(n,e),i=u(i,e)),t=t||" ",n+t+i},p.create=function(e,t){return d(e)?e instanceof p?e.clone():1===arguments.length&&2===e.length?new p(e[0],e[1]):new p(e,t):void 0},e=o.extend({init:function(e,t){this.p0=e||new p,this.p1=t||new p,this.observer=null,this.p0.observer=this,this.p1.observer=this},geometryChange:l.mixins.geometryChange,width:function(){return this.p1.x-this.p0.x},height:function(){return this.p1.y-this.p0.y}}),t=o.extend({init:function(e,t){this.center=e||new p,this.radius=t||0,this.observer=null,this.center.observer=this},geometryChange:l.mixins.geometryChange,equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new t(this.center.clone(),this.radius)},set:function(e,t){"radius"===e&&this.radius!==t&&(this.radius=t,this.geometryChange())},get:function(){return this.radius},pointAt:function(e){var t=this.center,n=this.radius,r=c(e);return new p(t.x-n*i.cos(r),t.y-n*i.sin(r))}}),n=o.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},times:function(e){return new n(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)}}),a(n,{translate:function(e,t){var i=new n;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=e,i.f=t,i},unit:function(){return new n(1,0,0,1,0,0)},rotate:function(e,t,r){var o=new n;return o.a=i.cos(c(e)),o.b=i.sin(c(e)),o.c=-o.b,o.d=o.a,o.e=t-t*o.a+r*o.b||0,o.f=r-r*o.a-t*o.b||0,o},scale:function(e,t){var i=new n;return i.a=e,i.b=0,i.c=0,i.d=t,i.e=0,i.f=0,i}}),a(s,{geometry:{Circle:t,Matrix:n,Point:p,Rect:e}})}(window.kendo.jQuery),function(e){var t,n,i,r=document,o=e.noop,a=Object.prototype.toString,s=window.kendo,l=s.Class,d=s.deepExtend,c=s.dataviz,u=s.Observable.extend({clear:o,destroy:function(){this.clear(),e(this.element).kendoDestroy()},resize:function(e){var t=this.getSize(),n=this._size;(e||!n||t.width!==n.width||t.height!==n.height)&&(this._size=t,this._resize(t))},getSize:function(){return{width:e(this.element).width(),height:e(this.element).height()}},setSize:function(t){e(this.element).css({width:t.width,height:t.height}),this.resize()},_resize:o,_handler:function(e){var t=this;return function(n){var i=n.target._kendoNode;i&&t.trigger(e,{shape:i.srcElement,originalEvent:n})}}});u.create=function(e,t,n){return i.current.create(e,t,n)},t=l.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,e.observer=this)},load:o,append:function(e){this.childNodes.push(e),e.parent=this},remove:function(e,t){for(var n=e;t>n;n++)this.childNodes[n].clear();this.childNodes.splice(e,t),this.parent=null},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=l.extend({init:function(e,t){var n,i;this.observer=null,this.prefix=t||"";for(n in e)i=e[n],i=this.wrap(i,n),this[n]=i},optionsChange:function(e){this.observer&&this.observer.optionsChange(e)},get:function(e){return s.getter(e,!0)(this)},set:function(e,t){var n,i=s.getter(e,!0)(this);i!==t&&(n=this._set(e,this.wrap(t,e)),this.observer&&!n&&this.observer.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,a=e.indexOf(".")>=0;if(a)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),o=s.getter(r,!0)(this),o||(o=new n({},r+"."),o.observer=this,this[r]=o),o instanceof n)return o.set(i.join("."),t),a;r+="."}return s.setter(e)(this,t),a},wrap:function(e,t){var i=a.call(e);return null!==e&&"[object Object]"===i&&(e instanceof n||(e=new n(e,this.prefix+t+".")),e.observer=this),e}}),i=function(){this._views=[]},i.prototype={register:function(e,t,n){var i=this._views,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t,n){var i,r=this._views,o=r[0];if(n)for(n=n.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):(s.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded"),void 0)}},i.current=new i,s.support.svg=function(){return r.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),s.support.canvas=function(){return!!r.createElement("canvas").getContext}(),d(c,{drawing:{BaseNode:t,OptionsStore:n,Surface:u,SurfaceFactory:i}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.Class,n=e.deepExtend,i=e.dataviz,r=i.append,o=i.geometry,a=o.Point,s=i.drawing,l=s.OptionsStore,d=i.util,c=d.defined,u=t.extend({init:function(e){var t=this;t.observer=null,t.options=new l(e||{}),t.options.observer=this},optionsChange:function(e){this.observer&&this.observer.optionsChange(e)},visible:function(e){return this.options.set("visible",e),this}}),p=u.extend({init:function(e){this.children=[],u.fn.init.call(this,e)},childrenChange:function(e,t,n){this.observer&&this.observer.childrenChange({action:e,items:t,index:n})},traverse:function(e){var t,n,i=this.children;for(t=0;i.length>t;t++)n=i[t],e(n),n.traverse&&n.traverse(e)},append:function(){r(this.children,arguments),this.childrenChange("add",arguments)},clear:function(){var e=this.children;this.children=[],this.childrenChange("remove",e,0)}}),h=u.extend({geometryChange:d.mixins.geometryChange,fill:function(e,t){return this.options.set("fill.color",e),c(t)&&this.options.set("fill.opacity",t),this},stroke:function(e,t,n){return this.options.set("stroke.color",e),c(t)&&this.options.set("stroke.width",t),c(n)&&this.options.set("stroke.opacity",n),this}}),f=h.extend({init:function(e,t){var n=this;n.content=e,h.fn.init.call(n,t)}}),g=h.extend({init:function(e,t){var n=this;h.fn.init.call(n,t),n.geometry=e||new o.Circle,n.geometry.observer=this}}),m=t.extend({init:function(e,t,n){var i=this;i.anchor=e||new a,i.anchor.observer=this,i.observer=null,t&&(i.controlIn=t,i.controlIn.observer=this),n&&(i.controlOut=n,i.controlOut.observer=this)},geometryChange:d.mixins.geometryChange}),v=h.extend({init:function(e){var t=this;t.segments=[],t.observer=null,h.fn.init.call(t,e)},moveTo:function(e,t){return this.segments=[],this.lineTo(e,t),this},lineTo:function(e,t){var n=c(t)?new a(e,t):e,i=new m(n);return i.observer=this,this.segments.push(i),this.geometryChange(),this},close:function(){return this.options.closed=!0,this.geometryChange(),this}}),_=h.extend({init:function(e){this.paths=[],h.fn.init.call(this,e)},moveTo:function(e,t){var n=new v;return n.observer=this,this.paths.push(n),n.moveTo(e,t),this},lineTo:function(e,t){return this.paths.length>0&&i.last(this.paths).lineTo(e,t),this},close:function(){return this.paths.length>0&&i.last(this.paths).close(),this}});n(s,{Group:p,Shape:h,Circle:g,Path:v,MultiPath:_,Segment:m,Text:f})}(window.kendo.jQuery),function(e){function t(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(o){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}var n=document,i=window.kendo,r=i.deepExtend,o=i.dataviz,a=o.defined,s=o.renderTemplate,l=o.drawing,d=l.BaseNode,c=o.util,u=c.renderAttr,p=c.renderAllAttr,h=c.renderSize,f="butt",g=o.DASH_ARRAYS,m="none",v="solid",_="square",k="http://www.w3.org/2000/svg",y="transparent",b="undefined",w=l.Surface.extend({init:function(e,t){l.Surface.fn.init.call(this),this.options=r({},this.options,t),this.bind(this.events,this.options),this._root=new C,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(e)},options:{width:"100%",height:"100%"},events:["click","mouseenter","mouseleave"],translate:function(e){var t=i.format("{0} {1} {2} {3}",e.x,e.y,this._size.width,this._size.height);this._offset=e,this.element.setAttribute("viewBox",t)},draw:function(e){this._root.load([e])},clear:function(){this._root.clear()},svg:function(){return this._template(this)},setSize:function(e){this.element.setAttribute("width",h(e.width)),this.element.setAttribute("height",h(e.height)),this.resize()},_resize:function(){this._offset&&this.translate(this._offset)},_template:s("<?xml version='1.0' ?><svg xmlns='"+k+"' version='1.1' width='#= kendo.dataviz.util.renderSize(d.options.width) #' height='#= kendo.dataviz.util.renderSize(d.options.height) #' style='position: absolute;'>#= d._root.render() #</svg>"),_appendTo:function(n){E(n,this._template(this)),this.element=n.firstElementChild,t(this.element),this._root.attachTo(this.element);var i=e(this.element);i.on("click",this._click),i.on("mouseover",this._mouseenter),i.on("mouseout",this._mouseleave),this.resize()}}),x=d.extend({load:function(e){var t,n,i,r,o=this,a=o.element;for(r=0;e.length>r;r++)n=e[r],i=n.children,n instanceof l.Group?t=new T(n):n instanceof l.Path?t=new S(n):n instanceof l.MultiPath?t=new D(n):n instanceof l.Circle&&(t=new A(n)),i&&i.length>0&&t.load(i),o.append(t),a&&t.attachTo(a)},attachTo:function(e){var t,i=n.createElement("div");E(i,"<svg xmlns='"+k+"' version='1.1'>"+this.render()+"</svg>"),t=i.firstChild.firstChild,t&&(e.appendChild(t),this.setElement(t))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,e._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},template:s("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},clear:function(){var e=this.element;e&&(e.parentNode.removeChild(e),this.element=null),d.fn.clear.call(this)}}),C=x.extend({attachTo:function(e){this.element=e},clear:d.fn.clear}),T=x.extend({template:s("<g>#= d.renderChildren() #</g>")}),S=x.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":this.allAttr(this.mapFill(e.value));break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":this.allAttr(this.mapStroke(e.value));break;case"visible":this.attr("visibility",e.value?"visible":"hidden");break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}this.invalidate()},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r=e.segments;if(r.length>0){for(t=[],i=0;r.length>i;i++)t.push(r[i].anchor.toString(1));return n="M"+t.join(" "),e.options.closed&&(n+="Z"),n}},mapStroke:function(e){var t=[];return e&&(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),a(e.opacity)&&t.push(["stroke-opacity",e.opacity]),a(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])),t},renderStroke:function(){return p(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=v){for(t=g[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap||_;return t&&t!=v?f:n},mapFill:function(e){var t=[];return e&&e.color!==y?(t.push(["fill",e.color]),a(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",m]),t},renderFill:function(){return p(this.mapFill(this.srcElement.options.fill))},renderCursor:function(){var e=this.srcElement.options.cursor;return e?"cursor:"+e+";":void 0},renderVisibility:function(){return this.srcElement.options.visible===!1?u("visibility","hidden"):""},template:s("<path #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # #= d.renderVisibility() # #= kendo.dataviz.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # stroke-linejoin='round'></path>")}),D=S.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),A=S.extend({geometryChange:function(){var e=this.srcElement.geometry;this.attr("cx",e.center.x),this.attr("cy",e.center.y),this.attr("r",e.radius),this.invalidate()},template:s("<circle #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # cx='#= this.srcElement.geometry.center.x #' cy='#= this.srcElement.geometry.center.y #' r='#= this.srcElement.geometry.radius #' #= d.renderVisibility() # #= d.renderStroke() # #= d.renderFill() #></circle>")}),E=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+k+"'></svg>",t=n.createElement("div"),i=typeof DOMParser!=b;t.innerHTML=e,i&&t.firstChild.namespaceURI!=k&&(E=function(e,t){var i=new DOMParser,r=i.parseFromString(t,"text/xml"),o=n.adoptNode(r.documentElement);e.innerHTML="",e.appendChild(o)})}(),i.support.svg&&l.SurfaceFactory.current.register("svg",w,10),r(l,{svg:{CircleNode:A,GroupNode:T,MultiPathNode:D,Node:x,PathNode:S,RootNode:C,Surface:w}})}(window.kendo.jQuery),function(e){var t=document,n=window.kendo,i=n.deepExtend,r=n.dataviz,o=r.defined,a=r.renderTemplate,s=r.drawing,l=s.BaseNode,d=r.util,c=d.renderAllAttr,u="none",p="transparent",h=s.Surface.extend({init:function(e,t){s.Surface.fn.init.call(this),this.options=i({},this.options,t),this.bind(this.events,this.options),this._root=new g,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(e)},events:["click","mouseenter","mouseleave"],draw:function(e){var t=this;t._root.load([e]),8>n.support.browser.version&&setTimeout(function(){t.element.style.display="block"},0)},clear:function(){this._root.clear(),8>n.support.browser.version&&(this.element.style.display="none")},_template:a("<div style='width:#= kendo.dataviz.util.renderSize(d.options.width) #; height:#= kendo.dataviz.util.renderSize(d.options.height) #; position: absolute;'><#= d._root.render() #/div>"),_appendTo:function(n){t.namespaces&&t.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),n.innerHTML=this._template(this),this.element=n.firstChild,this._root.attachTo(this.element);var i=e(this.element);i.on("click",this._click),i.on("mouseover",this._mouseenter),i.on("mouseout",this._mouseleave)}}),f=l.extend({load:function(e){var t,n,i,r,o=this,a=o.element;for(r=0;e.length>r;r++)n=e[r],i=n.children,n instanceof s.Group?t=new m(n):n instanceof s.Path?t=new k(n):n instanceof s.MultiPath?t=new y(n):n instanceof s.Circle&&(t=new b(n)),i&&i.length>0&&t.load(i),o.append(t),a&&t.attachTo(a)},attachTo:function(e){var n,i=t.createElement("div");i.style.display="none",t.body.appendChild(i),i.innerHTML=this.render(),n=i.firstChild,n&&(e.appendChild(n),this.setElement(n)),t.body.removeChild(i)},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,e._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},template:a("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},clear:function(){var e=this.element;e&&(e.parentNode.removeChild(e),this.element=null),l.fn.clear.call(this)},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)}}),g=f.extend({attachTo:function(e){this.element=e},clear:l.fn.clear}),m=f.extend({template:a("<div>#= d.renderChildren() #</div>")}),v=f.extend({optionsChange:function(e){if("stroke"===e.field)this.allAttr(this.mapStroke(e.value));else{var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}this.invalidate()},attributeMap:{"stroke.color":"color","stroke.width":"weight","stroke.opacity":"opacity","stroke.dashType":"dashstyle"},mapStroke:function(e){var t=[];return e?(t.push(["on","true"]),t.push(["color",e.color]),t.push(["weight",e.width+"px"]),o(e.opacity)&&t.push(["opacity",e.opacity]),o(e.dashType)&&t.push(["dashstyle",e.dashType])):t.push(["on","false"]),t},renderStroke:function(){return c(this.mapStroke(this.srcElement.options.stroke))},template:a("<kvml:stroke #= d.renderStroke() #></kvml:stroke>")}),_=f.extend({optionsChange:function(e){switch(e.field){case"fill":this.allAttr(this.mapFill(e.value));break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}this.invalidate()},attributeMap:{"fill.opacity":"opacity"},mapFill:function(e){var t=[];return e&&e.color!==p?(t.push(["on","true"]),t.push(["color",e.color]),o(e.opacity)&&t.push(["opacity",e.opacity])):t.push(["on","false"]),t},renderFill:function(){return c(this.mapFill(this.srcElement.options.fill))},template:a("<kvml:fill #= d.renderFill() #></kvml:fill>")}),k=f.extend({init:function(e){this.fill=new _(e),this.stroke=new v(e),f.fn.init.call(this,e),this.append(this.fill),this.append(this.stroke)},geometryChange:function(){this.attr("v",this.renderData()),this.invalidate()},optionsChange:function(e){"visible"===e.field?this.css("display",e.value?"block":"none"):0===e.field.indexOf("fill")?this.fill.optionsChange(e):0===e.field.indexOf("stroke")&&this.stroke.optionsChange(e),this.invalidate()},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e,t){var n,i,r,o=e.segments;if(o.length>0){for(n=[],r=0;o.length>r;r++)n.push(o[r].anchor.toString(0,","));return i="m "+n.shift()+" l "+n.join(" "),e.options.closed&&(i+=" x"),t!==!0&&(i+=" e"),i}},mapFill:function(e){var t=[];return e&&e.color!==p?(t.push(["fill",e.color]),o(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",u]),t},renderCursor:function(){var e=this.srcElement.options.cursor;return e?"cursor:"+e+";":""},renderVisibility:function(){return this.srcElement.options.visible===!1?"display:none;":""},renderCoordsize:function(){var e=this.srcElement.options.align===!1?1e4:1;return"coordsize='"+e+" "+e+"'"},renderSize:function(){var e=this.srcElement.options.align===!1?100:1;return"width:"+e+"px;height:"+e+"px;"},template:a("<kvml:shape style='position:absolute;#= d.renderSize() # #= d.renderVisibility() # #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #>#= d.renderChildren() #<kvml:path #= kendo.dataviz.util.renderAttr('v', d.renderData()) # /></kvml:shape>")}),y=k.extend({renderData:function(){var e,t,n,i=this.srcElement.paths;if(i.length>0){for(e=[],t=0;i.length>t;t++)n=i.length-1>t,e.push(this.printPath(i[t],n));return e.join(" ")}}}),b=k.extend({geometryChange:function(){var e=this.radius(),t=this.center(),n=2*e;this.css("left",t.x-e+"px"),this.css("top",t.y-e+"px"),this.css("width",n+"px"),this.css("height",n+"px"),this.invalidate()},center:function(){return this.srcElement.geometry.center},radius:function(){return this.srcElement.geometry.radius},template:a("<kvml:oval style='position:absolute;#= d.renderVisibility() ##= d.renderCursor() #width:#= d.radius() * 2 #px;height:#= d.radius() * 2 #px;top:#= d.center().y - d.radius() #px;left:#= d.center().x - d.radius() #px;'>#= d.renderChildren() #</kvml:oval>")});n.support.browser.msie&&s.SurfaceFactory.current.register("vml",h,20),i(s,{vml:{CircleNode:b,FillNode:_,GroupNode:m,MultiPathNode:y,Node:f,PathNode:k,RootNode:g,StrokeNode:v,Surface:h}})}(window.kendo.jQuery),function(e,t){var n,i=Math,r=i.abs,o=i.atan,a=i.atan2,s=i.cos,l=i.max,d=i.min,c=i.sin,u=i.tan,p=window.kendo,h=p.Class,f=p.dataviz,g=p.deepExtend,m=f.util,v=m.defined,_=m.rad,k=m.round,y=m.sqr,b=m.valueOrDefault,w=h.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new w(this.lat,this.lng)},round:function(e){return this.lng=k(this.lng,e),this.lat=k(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},greatCircleTo:function(e,t){var n,l,d,p,h,g,v,b,x,C,T,S,D,A,E,F,P,z,I,M,B,H,R,L,O,N,V,U,W;if(e=w.create(e),t=t||f.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(n=t.a,l=t.b,d=t.f,p=_(e.lng-this.lng),h=o((1-d)*u(_(this.lat))),g=c(h),v=s(h),b=o((1-d)*u(_(e.lat))),x=c(b),C=s(b),T=p,D=this.DISTANCE_ITERATIONS,A=!1;!A&&D-->0;)E=c(T),F=s(T),P=i.sqrt(y(C*E)+y(v*x-g*C*F)),I=g*x+v*C*F,B=a(P,I),H=v*C*E/P,z=1-y(H),M=0,0!==z&&(M=I-2*g*x/z),S=T,R=d/16*z*(4+d*(4-3*z)),T=p+(1-R)*d*H*(B+R*P*(M+R*I*(-1+2*y(M)))),A=r(T-S)<=this.DISTANCE_CONVERGENCE;return L=z*(y(n)-y(l))/y(l),O=1+L/16384*(4096+L*(-768+L*(320-175*L))),N=L/1024*(256+L*(-128+L*(74-47*L))),V=N*P*(M+N/4*(I*(-1+2*y(M))-N/6*M*(-3+4*y(P))*(-3+4*y(M)))),U=a(C*E,v*x-g*C*F),W=a(v*E,-g*C+v*x*F),{distance:k(l*O*(B-V),this.DISTANCE_PRECISION),azimuthFrom:m.deg(U),azimuthTo:m.deg(W)}}});w.fn.toString=function(){return p.format(this.FORMAT,this.lng,this.lat)},w.fromLngLat=function(e){return new w(e[1],e[0])},w.fromLatLng=function(e){return new w(e[0],e[1])},w.create=function(e,n){return v(e)?e instanceof w?e.clone():1===arguments.length&&2===e.length?w.fromLatLng(e):new w(e,n):t},n=h.extend({init:function(e,t){e=w.create(e),t=w.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);return e&&i+180>=t.lng+180&&n.lng+180>=i+180&&r+90>=n.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,n=e.lng+(t.lng-e.lng)/2,i=e.lat+(t.lat-e.lat)/2;return new w(i,n)},containsAny:function(e){var t,n=!1;for(t=0;e.length>t;t++)n=n||this.contains(e[t]);return n},include:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);t.lng=d(t.lng,i),t.lat=l(t.lat,r),n.lng=l(n.lng,i),n.lat=d(n.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new w(e.lat,t.lng),se:this.se,sw:new w(e.lng,t.lat)}},toArray:function(){var e=this.nw,t=this.se;return[e,new w(e.lat,t.lng),t,new w(e.lng,t.lat)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}),n.World=new n([90,-180],[-90,180]),n.create=function(e,i){return e instanceof n?e:e&&i?new n(e,i):e&&4===e.length&&!i?new n([e[0],e[1]],[e[2],e[3]]):t},g(f,{map:{Extent:n,Location:w}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,n=e.template,i=e.dataviz,r=i.util.valueOrDefault,o=t.extend({init:function(e,n){t.fn.init.call(this,e,n),this._initOptions(n),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){e&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,n,i=[];for(t=0;this.items.length>t;t++)n=this.items[t],n.text!==e&&i.push(n);this.items=i,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,i,r,o=[];for(this.element.empty(),e=n(this.options.itemTemplate),t=0;this.items.length>t;t++)i=this.items[t],r=this._itemText(i),""!==r&&o.push(e({text:r}));this.element.append(o.join(this.options.separator))},_itemText:function(e){var t="",n=this._inZoomLevel(e.minZoom,e.maxZoom),i=this._inArea(e.extent);return n&&i&&(t+=e.text),t},_inZoomLevel:function(e,t){var n=!0;return e=r(e,-Number.MAX_VALUE),t=r(t,Number.MAX_VALUE),n=this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(o)}(jQuery),function(e){function t(e){return n.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoNavigator",s=t("n")+t("e")+t("s")+t("w"),l=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var n=this.options.panStep;this.trigger("pan",{x:e*n,y:t*n})},_click:function(t){var n=0,i=0,r=e(t.currentTarget);r.is(".k-navigator-n")?i=1:r.is(".k-navigator-s")?i=-1:r.is(".k-navigator-e")?n=1:r.is(".k-navigator-w")&&(n=-1),this._pan(n,i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});n.dataviz.ui.plugin(l)}(jQuery),function(e){function t(e,t){return n.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoZoomControl",s=t("in","+")+t("out","-"),l=187,d=189,c=61,u=173,p=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var n=e(t.currentTarget),i=1;n.is(".k-zoom-out")&&(i=-1),this._change(i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case l:case c:this._change(1);break;case r.NUMPAD_MINUS:case d:case u:this._change(-1)}}});n.dataviz.ui.plugin(p)}(jQuery),function(){var e=Math,t=e.atan,n=e.exp,i=e.pow,r=e.sin,o=e.log,a=e.tan,s=window.kendo,l=s.Class,d=s.dataviz,c=d.Matrix,u=s.deepExtend,p=d.geometry,h=p.Point,f=d.map,g=f.Location,m=d.util,v=m.rad,_=m.deg,k=m.limitValue,y=e.PI,b=y/2,w=y/4,x=y/180,C={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},T=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:C},forward:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=k(e.lat,-n.MAX_LAT,n.MAX_LAT),l=t?k(e.lng,-n.MAX_LNG,n.MAX_LNG):e.lng,d=v(l-a)*o,c=n._projectLat(s);return new h(d,c)},_projectLat:function(e){var t=this.options.datum,n=t.e,s=t.a,l=v(e),d=a(w+l/2),c=n*r(l),u=i((1-c)/(1+c),n/2);return s*o(d*u)},inverse:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=e.x/(x*o)+a,l=k(n._inverseY(e.y),-n.MAX_LAT,n.MAX_LAT);return t&&(s=k(s,-n.MAX_LNG,n.MAX_LNG)),new g(l,s)},_inverseY:function(o){var a,s,l,d,c=this,u=c.options.datum,p=u.a,h=u.e,f=h/2,g=n(-o/p),m=b-2*t(g);for(a=0;c.INVERSE_ITERATIONS>=a&&(s=h*r(m),l=i((1-s)/(1+s),f),d=b-2*t(g*l)-m,m+=d,!(e.abs(d)<=c.INVERSE_CONVERGENCE));a++);return _(m)}}),S=T.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,n=v(e),i=a(w+n/2);return t*o(i)},_inverseY:function(e){var i=this.options.datum.a,r=n(-e/i);return _(b-2*t(r))}}),D=l.extend({forward:function(e){return new h(e.lng,e.lat)},inverse:function(e){return new g(e.y,e.x)}}),A=l.extend({init:function(){var e=this,t=e._proj=new S,n=this.c=2*y*t.options.datum.a;this._tm=c.translate(.5,.5).times(c.scale(1/n,-1/n)),this._itm=c.scale(n,-n).times(c.translate(-.5,-.5))},toPoint:function(e,t,n){var i=this._proj.forward(e,n);return i.transform(this._tm).multiply(t||1)},toLocation:function(e,t,n){return e=e.clone().multiply(1/(t||1)).transform(this._itm),this._proj.inverse(e,n)}}),E=l.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),F=l.extend({init:function(){this._proj=new D},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});u(d,{map:{crs:{EPSG3395:E,EPSG3857:A,EPSG4326:F},datums:{WGS84:C},projections:{Equirectangular:D,Mercator:T,SphericalMercator:S}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.dataviz,o=n.deepExtend,a=r.defined,s=r.map.Extent,l=i.extend({init:function(n,i){this._initOptions(i),this.map=n,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(n.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this.reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)
},reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),n=!a(e.minZoom)||t>=e.minZoom,i=!a(e.maxZoom)||e.maxZoom>=t,r=s.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}});o(r,{map:{layers:{Layer:l}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,s=o.last,l=o.util.defined,d=o.geometry,c=o.drawing,u=c.Group,p=o.map,h=p.Location,f=p.layers.Layer,g=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.surface=c.Surface.create(this.element[0],{width:e.scrollElement.width(),height:e.scrollElement.height()}),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._loader=new m(this.map,this.options.style,this),this._initDataSource()},options:{autoBind:!0},destroy:function(){f.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},reset:function(){f.fn.reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_beforeReset:function(){this.surface.clear()},_resize:function(){this.surface.setSize(this.map.getSize())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,n;for(this._data=e,this._clearMarkers(),t=0;e.length>t;t++)n=this._loader.parse(e[t]),n&&this.surface.draw(n)},shapeCreated:function(e){var t,n=!1;return e instanceof c.Circle&&(n=l(this._createMarker(e))),n||(t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t)),n},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){f.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo(t))},_handler:function(e){var t=this;return function(n){if(n.shape){var i={layer:t,shape:n.shape,originalEvent:n.originalEvent};t.map.trigger(e,i)}}}}),m=i.extend({init:function(e,t,n){this.observer=n,this.locator=e,this.style=t},parse:function(e){var t=new u;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,n){var i,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;o.length>i;i++)r=this._loadPolygon(e,[o[i]],n),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,n);break;case"MultiPolygon":for(i=0;o.length>i;i++)this._loadPolygon(e,o[i],n);break;case"Point":this._loadPoint(e,o,n);break;case"MultiPoint":for(i=0;o.length>i;i++)this._loadPoint(e,o[i],n)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor.equals(s(t).anchor))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,n){var i=this._buildPolygon(t);return i.dataItem=n,this._loadShape(e,i)},_buildPolygon:function(e){var t,n,i,r=e.length>1?c.MultiPath:c.Path,o=new r(this.style);for(t=0;e.length>t;t++)for(n=0;e[t].length>n;n++)i=this.locator.locationToView(h.fromLngLat(e[t][n])),0===n?o.moveTo(i.x,i.y):o.lineTo(i.x,i.y);return o},_loadPoint:function(e,t,n){var i=h.fromLngLat(t),r=this.locator.locationToView(i),o=new d.Circle(r,10),a=new c.Circle(o,this.style);return a.dataItem=n,a.location=i,this._loadShape(e,a)}});a(n.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:g,ShapeLayer:g},GeoJSONLoader:m}})}(window.kendo.jQuery),function(e){function t(e){return new p(d(e.x),d(e.y))}function n(e,t){return"x:"+e.x+"y:"+e.y+"zoom:"+t}var i=Math,r=e.proxy,o=window.kendo,a=o.Class,s=o.template,l=o.dataviz,d=l.round,c=o.deepExtend,u=l.geometry,p=u.Point,h=l.map.layers.Layer,f=l.util,g=f.renderSize,m=f.limitValue,v=h.extend({init:function(e,t){h.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)},destroy:function(){h.fn.destroy.call(this),this._view.destroy(),this._view=null},reset:function(){h.fn.reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return _},_activate:function(){h.fn._activate.call(this),o.support.mobileOS||(this._pan||(this._pan=r(this._throttleRender,this)),this.map.bind("pan",this._pan))},_deactivate:function(){h.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,n=t.extent(),i={nw:t.locationToLayer(n.nw).round(),se:t.locationToLayer(n.se).round()};e.center(t.locationToLayer(t.center())),e.extent(i),e.zoom(t.zoom())},_resize:function(){this._render()},_throttleRender:function(){var e=this,t=new Date,n=e._renderTimestamp;(!n||t-n>100)&&(this._render(),e._renderTimestamp=t)},_panEnd:function(e){h.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),_=a.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new y},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new p(i.floor(e.x/this.options.tileSize),i.floor(e.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),n=this.indexToPoint(t).subtract(this._extent.nw);return{x:i.ceil((i.abs(n.x)+e.width)/this.options.tileSize),y:i.ceil((i.abs(n.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,n=t.clone().subtract(e);return{width:n.x,height:n.y}},indexToPoint:function(e){var t=e.x,n=e.y;return new p(t*this.options.tileSize,n*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;i.x>t;t++)for(n=0;i.y>n;n++)e=this.createTile({x:r.x+t,y:r.y+n}),e.options.visible||(this.element.append(e.element),e.options.visible=!0)},createTile:function(e){var t=this.tileOptions(e);return this.pool.get(this._center,t)},tileOptions:function(e){var n=this.wrapIndex(e),i=this.indexToPoint(e),r=i.clone().subtract(this.basePoint);return{index:n,currentIndex:e,point:i,offset:t(r),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=i.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:m(e.y,0,t-1)}},wrapValue:function(e,t){var n=i.abs(e)%t;return e=e>=0?n:t-(0===n?t:n)}}),k=a.extend({init:function(e){this._initOptions(e),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=e("<img style='position: absolute; display: block; visibility: visible;' />").error(r(function(e){e.target.setAttribute("src",this.errorUrl())},this))},load:function(e){this.options=c({},this.options,e);var t=this.element[0];t.style.visibility="visible",t.style.display="block",t.style.top=g(this.options.offset.y),t.style.left=g(this.options.offset.x),t.setAttribute("src",this.url()),this.options.id=n(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){var e=s(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=s(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),y=a.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){var n,i=this;return n=i._items.length>=i.options.maxSize?i._update(e,t):i._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},_create:function(e){var t,i,r,o,a=this,s=a._items,l=n(e.currentIndex,e.zoom);for(i=0;s.length>i;i++)r=s[i],r.options.id===l&&(t=r,o=t);return t?t.load(e):(o=new k(e),this._items.push(o)),o},_update:function(e,t){var i,r,o,a,s=this,l=s._items,d=-Number.MAX_VALUE,c=n(t.currentIndex,t.zoom);for(o=0;l.length>o;o++){if(a=l[o],i=a.options.point.clone().distanceTo(e),a.options.id===c)return l[o];i>d&&(r=o,d=i)}return l[r].load(t),l[r]}});c(l,{map:{layers:{tile:v,TileLayer:v,ImageTile:k,TilePool:y,TileView:_}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.template,r=n.dataviz,o=n.deepExtend,a=r.defined,s=r.map.Extent,l=r.map.Location,d=r.map.layers.TileLayer,c=r.map.layers.TileView,u=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this._initView()},options:{settingsUrl:"http://dev.virtualearth.net/REST/v1/Imagery/Metadata/#= imagerySet #?output=json&jsonp=bingTileParams&include=ImageryProviders&key=#= key #",imagerySet:"road"},_initView:function(){var n,r,o=this.options;o.key&&o.settingsUrl&&(n=i(o.settingsUrl),r=n({key:o.key,imagerySet:o.imagerySet}),e.ajax({url:r,type:"get",dataType:"jsonp",jsonpCallback:"bingTileParams",success:t(this._success,this)}))},_success:function(e){var t,n;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],o(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),n=this.options,a(n.minZoom)||(n.minZoom=t.zoomMin),a(n.maxZoom)||(n.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return p},_addAttribution:function(){var e,t,n,i,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(n=e[t],i=0;n.coverageAreas.length>i;i++)r=n.coverageAreas[i],o.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new s(new l(r.bbox[2],r.bbox[1]),new l(r.bbox[0],r.bbox[3]))})}}),p=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,n,i,r="";for(i=this._zoom;i>0;i--)t=0,n=1<<i-1,0!==(e.x&n)&&t++,0!==(e.y&n)&&(t+=2),r+=t;return r}});o(r,{map:{layers:{bing:u,BingLayer:u,BingView:p}}})}(window.kendo.jQuery),function(e,t){var n=document,i=Math,r=e.inArray,o=e.proxy,a=window.kendo,s=a.Class,l=a.data.DataSource,d=a.ui.Tooltip,c=a.dataviz,u=a.deepExtend,p=c.map,h=p.Location,f=p.layers.Layer,g=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var n=0;t.length>n;n++)this._addOne(t[n])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t=e.location();t&&e.showAt(this.map.locationToView(t))},reset:function(){var e,t;for(f.fn.reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,n){var i,r,o=p.Marker.create(e,this.options);return o.dataItem=n,i={marker:o},r=this.map.trigger("markerCreated",i),r?t:(this.add(o),o)},_addOne:function(e){var t=m.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.items)},_load:function(e){var t,n,i,r;for(this._data=e,this.clear(),t=a.getter(this.options.locationField),n=a.getter(this.options.titleField),i=0;e.length>i;i++)r=e[i],this.bind({location:t(r),title:n(r)},r)}}),m=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=h.create(e).toArray(),this.layer&&this.layer.update(this),this):h.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:i.round(e.x),top:i.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,i;this.element||(t=this.options,i=this.layer,this.element=e(n.createElement("span")).addClass("k-marker k-marker-"+a.toHyphens(t.shape||"pin")).attr("title",t.title).css("zIndex",t.zIndex),i&&i.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,n=this,i=n.options.title,r=n.options.tooltip||{};r&&d&&(e=r.template,e&&(t=a.template(e),r.content=function(e){return e.location=n.location(),e.marker=n,t(e)}),(i||r.content||r.contentUrl)&&(this.tooltip=new d(this.element,r),this.tooltip.marker=this))}});m.create=function(e,t){return e instanceof m?e:new m(u({},t,e))},u(c,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(e){var t=document,n=Math,i=n.min,r=n.pow,o=e.proxy,a=window.kendo,s=a.ui.Widget,l=a.deepExtend,d=a.dataviz,c=d.ui,u=d.defined,p=d.geometry,h=p.Point,f=d.map,g=f.Extent,m=f.Location,v=f.crs.EPSG3857,_=d.util,k=_.limitValue,y=_.renderPos,b=_.valueOrDefault,w="k-",x=.9,C=.93,T="DOMMouseScroll mousewheel",S=5,D=s.extend({init:function(e,n){a.destroy(e),s.fn.init.call(this,e),this._initOptions(n),this.bind(this.events,n),this.crs=new v,this.element.addClass(w+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind(T,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();s.fn.destroy.call(this)},zoom:function(e){var t=this.options;return u(e)?(e=k(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=m.create(e).toArray(),this._reset(),this):m.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){s.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var n=!this.options.wraparound;return e=m.create(e),this.crs.toPoint(e,this._layerSize(t),n)},layerToLocation:function(e,t){var n=!this.options.wraparound;return e=h.create(e),this.crs.toLocation(e,this._layerSize(t),n)},locationToView:function(e){var t,n;return e=m.create(e),t=this.locationToLayer(this._viewOrigin),n=this.locationToLayer(e),n.subtract(t)},viewToLocation:function(e,t){var n=this.locationToLayer(this._getOrigin(),t);return e=h.create(e),e=e.clone().add(n),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),n=e.originalEvent||e,i=b(n.pageX,n.clientX)-t.left,r=b(n.pageY,n.clientY)-t.top;return new p.Point(i,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),n=e.width();return this.options.wraparound||(n=i(t,n)),{width:n,height:i(t,e.height())}},_setOrigin:function(e,t){var n,i=this.viewSize();return e=this._origin=m.create(e),n=this.locationToLayer(e,t),n.x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,t).toArray(),this},_getOrigin:function(e){var t,n=this.viewSize();return(e||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=n.width/2,t.y-=n.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,i,r,o,a,s,l;for(e=g.create(e),this.center(e.center()),t=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),a=this.locationToLayer(e.se,r),s=n.abs(a.x-o.x),l=n.abs(a.y-o.y),!(t>=s&&i>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize();return n.x+=i.width,n.y+=i.height,e=this.layerToLocation(n),new g(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)},_initControls:function(){var e=this.options.controls;c.Attribution&&e.attribution&&this._createAttribution(e.attribution),a.support.mobileOS||(c.Navigator&&e.navigator&&this._createNavigator(e.navigator),c.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,n){var i=t.position||n,r="."+y(i).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+y(i)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new c.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),n=this.navigator=new c.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),n.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),n.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,n=t.scroller,i=n.scrollLeft+e.x,r=n.scrollTop-e.y,o=this._virtualSize,a=this.element.height(),s=this.element.width();i=k(i,o.x.min,o.x.max-s),r=k(r,o.y.min,o.y.max-a),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-i,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),n=this.zoomControl=new c.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),n.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=a.support.mobileOS?C:x,t=this.options.zoomable!==!1,n=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:S,zoom:t,mousewheelScrolling:!1});n.bind("scroll",o(this._scroll,this)),n.bind("scrollEnd",o(this._scrollEnd,this)),n.userEvents.bind("gesturestart",o(this._scaleStart,this)),n.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=n.scrollElement},_initLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=d.map.layers[n],a.push(new r(this,l({},i,t)))},_initMarkers:function(){this.markers=new f.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),n=e.sender.movable,i=new p.Point(n.x,n.y).multiply(-1).multiply(1/n.scale);t.x+=i.x,t.y+=i.y,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,n=this._scaleToZoom(t),i=new p.Point(e.center.x,e.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n),a=o.subtract(i);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e,i=t/this.options.minSize,r=n.log(i)/n.log(2);return n.round(r)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,n,i,o=this.scroller,a=o.dimensions.x,s=o.dimensions.y,l=this._layerSize(),d=20*l,c=this.extent().nw,u=this.locationToLayer(c).round();o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),o.movable.round=!0,t={min:-u.x,max:l-u.x},n={min:-u.y,max:l-u.y},this.options.wraparound&&(t.min=-d,t.max=d),this.options.pannable===!1&&(i=this.viewSize(),t.min=n.min=0,t.max=i.width,n.max=i.height),a.makeVirtual(),s.makeVirtual(),a.virtualSize(t.min,t.max),s.virtualSize(n.min,n.max),this._virtualSize={x:t,y:n}},_renderLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[],s=this.scrollWrap;for(s.empty(),e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=d.map.layers[n],a.push(new r(this,l({},i,t)))},_layerSize:function(e){return e=b(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_mousewheel:function(e){var t,n,i,r,o,a,s,l;e.preventDefault(),t=d.mwDelta(e)>0?-1:1,n=this.options,i=this.zoom(),r=k(i+t,n.minZoom,n.maxZoom),n.zoomable!==!1&&r!==i&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),a=this.viewToLocation(o),s=this.locationToLayer(a,r),l=s.subtract(o),this._zoomAround(l,r),this.trigger("zoomEnd",{originalEvent:e})))}});d.ui.plugin(D)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});